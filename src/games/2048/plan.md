## 🧩 2048 게임 기능 명세서

## ✅ 1. 게임 개요
- **목표**: 같은 숫자 블록을 합쳐서 **2048 타일**을 만드는 퍼즐 게임
- **조작 방법**: 키보드 방향키(↑↓←→) 및 **모바일 터치 슬라이드**
- **게임 종료 조건**: 더 이상 움직일 수 없을 때
- **게임 승리 조건**: 2048 타일 생성 시 알림 후 게임 계속 가능

---

## 🧱 2. 게임 보드

### ▫️ 기본 설정
- **보드 크기**: 4 x 4 (행 × 열)
- **타일 값**: 2 또는 4 (시작 시 2개 생성, 90% 확률로 2, 10% 확률로 4)
- **초기 상태**: 랜덤한 위치에 타일 2개 배치

---

## 🧠 3. 게임 규칙 및 동작

### 1. 슬라이드 동작 (←, →, ↑, ↓)
- 모든 타일이 해당 방향으로 **한 번에 이동**
- 같은 숫자의 타일이 충돌하면 **하나로 병합**
  - 병합된 타일은 한 턴에 한 번만 병합 가능
- 병합된 숫자만큼 점수 증가

### 2. 병합 예시

병합은 입력한 방향에 따라 순서대로 진행되며, 한 번의 이동에서는 타일 하나가 한 번만 병합될 수 있습니다.

#### ◽ 왼쪽(←) 방향 병합

| 입력 전       | 입력 후      |
|---------------|--------------|
| 2 2 4 0       | 4 4 0 0      |
| 2 2 2 2       | 4 4 0 0      |
| 4 4 4 4       | 8 8 0 0      |

#### ◽ 오른쪽(→) 방향 병합

| 입력 전       | 입력 후      |
|---------------|--------------|
| 0 4 2 2       | 0 0 4 4      |
| 2 2 2 2       | 0 0 4 4      |
| 4 4 4 4       | 0 0 8 8      |

#### ◽ 위쪽(↑) 방향 병합

| 입력 전 | 입력 후 |
|--------|--------|
| 2 0 0 0     | 4 0 0 0      |
| 2 0 0 0     | 0 0 0 0      |
| 0 0 0 0     | 0 0 0 0      |
| 0 0 0 0     | 0 0 0 0      |

(4행 1열 세로 방향 예시)

#### ◽ 아래쪽(↓) 방향 병합

| 입력 전 | 입력 후 |
|--------|--------|
| 0 0 0 0     | 0 0 0 0      |
| 0 0 0 0     | 0 0 0 0      |
| 2 0 0 0     | 0 0 0 0      |
| 2 0 0 0     | 4 0 0 0      |

(4행 1열 세로 방향 예시)

### 3. 새 타일 생성
- 슬라이드 후 이동/병합이 발생하면, 빈 칸 중 하나에 새 타일 1개 생성
- 생성 값: 2 (90%), 4 (10%)

---

## 🕹️ 4. 사용자 입력

### ▫️ 조작 방식
- **PC**: Arrow 키 (`ArrowUp`, `ArrowDown`, `ArrowLeft`, `ArrowRight`)
- **모바일**: 터치 슬라이드 제스처 (상, 하, 좌, 우)

### ▫️ 무효 입력 처리
- 슬라이드 결과 보드에 **변화가 없으면** 타일 생성 없음
- 무효 입력 시 점수 및 상태 변화 없음

---

## 🧾 5. 점수 시스템

- 병합된 숫자만큼 점수 증가 (예: 2+2 → 4점 추가)
- **현재 점수**와 **최고 점수**를 화면에 표시
- 최고 점수는 **LocalStorage에 저장**

---

## 🚫 6. 게임 오버 조건

- 네 방향 중 어떤 방향으로도 타일 이동/병합이 불가능할 때
- 확인 절차:
  - 모든 방향에 대해 `canMove()` 함수로 이동 가능성 검사

---

## 🏆 7. 게임 승리 조건

- 보드에 **2048 타일**이 생성되면 "🎉 승리 메시지" 표시
- 게임은 계속 진행 가능 (`Continue` 버튼 표시)

---

## 🎨 8. UI 구성 요소

| 구성 요소     | 설명 |
|--------------|------|
| **게임 보드**   | 4x4 격자 UI, 각 타일은 숫자 및 색상으로 표현 |
| **타일 컴포넌트** | 숫자에 따라 다른 색상, 애니메이션 포함<br>이동 시 슬라이드, 병합 시 scale-up, 새 타일 생성 시 grow-in 효과 포함 |
| **점수판**      | 현재 점수 및 최고 점수 표시 |
| **상태 메시지**  | 승리/패배 시 메시지 + 재시작 버튼 |
| **리셋 버튼**   | 게임 상태 초기화 기능 제공 |

---

## 🔄 9. 게임 루프 흐름 요약

1. 게임 초기화: 빈 보드 + 랜덤 타일 2개 생성
2. 사용자 입력 대기 (←, →, ↑, ↓ 또는 터치)
3. 슬라이드 및 병합 처리
4. 점수 계산
5. 새 타일 생성 (변화 발생 시)
6. 승리/패배 판단
7. 상태 및 화면 렌더링 반복

---

## 🎞️ 10. 타일 애니메이션 명세

게임의 시각적 피드백과 사용자 경험 향상을 위해, 타일의 상태 변화에 따라 다음과 같은 애니메이션 효과를 적용합니다.

### ▫️ 타일 이동 애니메이션
- 사용자가 입력한 방향으로 타일이 부드럽게 슬라이드되며 이동합니다.
- `transform: translate(...)` 기반의 CSS 트랜지션 사용.
- 권장 지속 시간: **약 150ms**

### ▫️ 타일 병합 애니메이션
- 병합된 타일은 잠시 **커졌다가 원래 크기로 돌아오는 scale-up 애니메이션**이 적용됩니다.
- 시각적으로 병합 이벤트를 강조하고 점수 증가와 연결된 느낌을 제공합니다.
- 예: `scale(1.0) → scale(1.1) → scale(1.0)` 
- 권장 지속 시간: **100~120ms**

### ▫️ 새 타일 생성 애니메이션
- 새로 생성된 타일은 **작은 크기에서 점점 커지는 grow-in 애니메이션**을 가집니다.
- 시각적으로 새 타일의 위치를 강조합니다.
- 예: `scale(0.0) → scale(1.0)` 또는 `opacity: 0 → 1`
- 권장 지속 시간: **약 200ms**

### ▫️ 애니메이션 처리 순서
- 이동 → 병합 → 점수 반영 → 새 타일 생성 순서로 처리
- 타일 상태(`isMerging`, `isNew`, `position`)를 기반으로 애니메이션 제어
- `requestAnimationFrame` 또는 CSS `will-change` 속성으로 성능 최적화

---

## 🧪 11. 테스트 포인트

### ▫️ 유틸리티 함수 (`utils.ts`)
- `slideBoard(board, direction): Board`
- `mergeTiles(row): { row: number[], score: number }`
- `canMove(board): boolean`

### ▫️ 컨트롤러 (`controllers/`)
- 방향키 및 터치 이벤트 처리
- 리셋 및 상태 관리

### ▫️ 컴포넌트 (`components/`)
- 보드 렌더링
- 타일 표시 및 애니메이션
- 점수판, 상태 메시지

---

## 📌 추가 고려 사항

- ✅ **모바일 완전 대응 (필수)**
  - 터치 이벤트(`touchstart`, `touchend`)를 통해 방향 감지
- ⏯️ 애니메이션 추가 (슬라이드, 병합, 타일 생성 시)
- 🔗 점수 공유 기능 (SNS 공유 버튼 등)
